<!DOCTYPE html>
<html>

  <head>
    <script src="jquery.js"></script>
    <script src="dataGenerator.js"></script>

  </head>


  <body>

    <script>

      $(document).ready(function() {

        // Function to generate (currentTime) a (tweet) was modified
        var timestamp = function() {
          var date = new Date();
          var strTime = date;
          return strTime;
        };

        // <body> element
        var $body = $('body');

        console.log(window.streams);
        console.log(streams.users);
        console.log(window.streams.home);

        // Change (tag) of <body> elem to (emtpy string)
        $body.html('');

        // (Index) of the (last tweet) of the (followed users)
        var index = streams.home.length - 1;

        // (!) Currently working - Testing~
        // Iterate thru (folllowed users s' tweets) obj
        while(index >= 0) {

          // Generate a (new tweet) with (timestamp) after every (1 sec)
          setInterval(function() {
            generateNewTweets();

          },1000);

          setInterval();

        }

        // (!) Currently working
        function generateNewTweets() {

          if (index === 0) {
            return index = streams.home.length - 1;
          }

          // Current tweetObj
          let tweet = streams.home[index];

          // Current user's name
          let currentUser = tweet.user;

          // Current <div> element
          var $tweet = $('<div></div>'); // Working
          $tweet.attr('id', currentUser);

          // Generate newLine between (each tweet)
          var newLine = $('<br></br>');

          // Generate (time) & (newLine) for (currentTweet)
          // Create <p> elem for currenTime
          let time = timestamp();
          var currentTime = $('<div></div>');
          currentTime.text(time);

          let timeLinePath = 'TimeLines/' + tweet.user + '.html';

          var userName = $('<a></a>');
          userName.attr('class', currentUser);
          userName.attr('href', timeLinePath);
          userName.text('@' + tweet.user + ': ' );
          userName.appendTo($tweet);

          var userTweet = $('<div></div>');
          userTweet.text(tweet.message);
          userTweet.appendTo($tweet);

          // Appending
          currentTime.appendTo($tweet);
          newLine.appendTo($tweet);
          $tweet.prependTo($body);

          // next tweetObj
          index -= 1;
        }

      });

    </script>

  </body>
</html>
